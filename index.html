<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Twitch Embed</title>
  <script src="https://player.twitch.tv/js/embed/v1.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }
    #twitch-embed {
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>
<body>
  <div id="twitch-embed"></div>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const channelName = urlParams.get('channel') || 'dotatv247';

    const player = new Twitch.Player("twitch-embed", {
      width: "100%",
      height: "100%",
      channel: channelName,
      autoplay: true,
      parent: ["safelogj.github.io"]
    });

    const events = {
      play: "play",
      pause: "pause",
      mute: "mute",
      unmute: "unmute",
      ready: "ready",
      ended: "ended",
      online: "online",
      offline: "offline",
      seek: "seek",
      playback_blocked: "blocked",
      ad_started: "ad_started",
      ad_ended: "ad_ended",
      video_ready: "video_ready"
    };

    for (const [key, value] of Object.entries(events)) {
      const eventKey = Twitch.Player[key.toUpperCase()];
      if (eventKey) {
        player.addEventListener(eventKey, () => {
          if (window.AndroidInterface && AndroidInterface.onEvent) {
            AndroidInterface.onEvent(value);
          }
        });
      }
    }
  </script>
</body>
</html>
